<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendrier de l'Avent - Geek Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Mountains+of+Christmas:wght@700&family=Fira+Code:wght@400;700&family=Indie+Flower&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. VARIABLES & CYCLE JOUR/NUIT --- */
        :root {
            --neon-green: #0f0;
            --neon-red: #ff0055;
            --gold: #ffd700;
            --glass-bg: rgba(0, 0, 0, 0.6);
        }

        body {
            font-family: 'Fira Code', monospace;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Animation du cycle Jour / Nuit (acc√©l√©r√© pour l'effet visuel : 60s) */
            background: linear-gradient(180deg, #020111 0%, #20202c 100%);
            animation: dayNightCycle 60s infinite alternate;
        }

        @keyframes dayNightCycle {
            0% { background: linear-gradient(180deg, #020111 0%, #1a1a2e 100%); } /* Nuit profonde */
            25% { background: linear-gradient(180deg, #2c3e50 0%, #4ca1af 100%); } /* Matin */
            50% { background: linear-gradient(180deg, #3a7bd5 0%, #00d2ff 100%); } /* Midi */
            75% { background: linear-gradient(180deg, #cc2b5e 0%, #753a88 100%); } /* Cr√©puscule */
            100% { background: linear-gradient(180deg, #000000 0%, #434343 100%); } /* Nuit */
        }

        /* --- 2. BACKGROUND ANIM√â (CANVAS) --- */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.4; /* Subtil pour ne pas g√™ner la lecture */
        }

        /* --- 3. HEADER & TYPEWRITER --- */
        header {
            z-index: 2;
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            border: 1px solid var(--neon-green);
            box-shadow: 0 0 15px var(--neon-green);
            max-width: 800px;
            width: 90%;
        }

        h1 {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 3em;
            margin: 0;
            color: var(--gold);
            text-shadow: 2px 2px 0 #d42426;
        }

        #typewriter-container {
            font-family: 'Press Start 2P', cursive; /* Style 8-bit */
            font-size: 0.8em;
            color: var(--neon-green);
            margin-top: 15px;
            min-height: 1.2em; /* Emp√™che le saut de ligne */
        }

        .cursor {
            display: inline-block;
            width: 10px;
            background-color: var(--neon-green);
            animation: blink 1s infinite;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- 4. GRILLE CALENDRIER --- */
        #advent-calendar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            width: 90%;
            max-width: 1000px;
            padding: 40px;
            margin-top: 30px;
            margin-bottom: 50px;
            z-index: 2;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* --- 5. STYLE DES PORTES --- */
        .door {
            height: 140px;
            background: linear-gradient(135deg, #d42426 0%, #8e0e00 100%);
            border: 2px solid #fff;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 2.5em;
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            position: relative;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        /* D√©co Ruban */
        .door::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 20%;
            background: var(--gold);
            top: 40%;
            opacity: 0.8;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .door::after {
            content: '';
            position: absolute;
            width: 20%;
            height: 100%;
            background: var(--gold);
            left: 40%;
            opacity: 0.8;
        }
        
        /* Num√©ro par dessus le ruban */
        .door span { z-index: 5; text-shadow: 2px 2px 4px black; }

        .door:hover:not(.disabled) {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 0 20px var(--neon-red);
            z-index: 10;
        }

        /* Cadenas */
        .door.disabled {
            filter: grayscale(1);
            opacity: 0.7;
            cursor: not-allowed;
        }
        .door.disabled span::after { content: ' üîí'; font-size: 0.5em; }

        /* --- 6. √âTAT OUVERT (STYLE MANUSCRIT) --- */
        .door.opened {
            background: #fff;
            color: #333;
            border: 2px dashed #333;
            /* Changement de police demand√© */
            font-family: 'Indie Flower', cursive; 
            font-size: 1.8em; /* Ajustement taille */
            transform: scale(0.95);
        }
        .door.opened::before, .door.opened::after { display: none; } /* Enl√®ve le ruban */
        
        .door.opened span::after {
            content: ' ‚úÖ';
            font-size: 0.8em;
            color: green;
        }

        /* --- 7. MODALE --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: #1a1a1a;
            color: var(--neon-green);
            margin: 10% auto;
            padding: 20px;
            border: 2px solid var(--neon-green);
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 0 30px var(--neon-green);
            text-align: center;
            position: relative;
            font-family: 'Fira Code', monospace;
        }

        .close-btn {
            color: var(--neon-red);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-btn:hover { text-shadow: 0 0 10px var(--neon-red); }

        .modal-content img, .modal-content video {
            max-width: 100%;
            border-radius: 5px;
            border: 1px solid #555;
            margin-top: 15px;
        }
    </style>
</head>
<body>

    <canvas id="matrix-bg"></canvas>

    <header>
        <h1>üéÑ Code & Chill üéÖ</h1>
        <div id="typewriter-container">
            <span id="typewriter-text"></span><span class="cursor">&nbsp;</span>
        </div>
    </header>

    <div id="advent-calendar">
        </div>

    <div id="content-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title" style="color:var(--gold)">Jour X</h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION DU CONTENU (Ajoutez vos chemins ici) ---
        const doorContents = [
            { day: 1, type: 'text', content: 'Hello World! C\'est parti pour D√©cembre.' },
            { day: 2, type: 'img', src: 'media/meme_dev.jpg', alt: 'Meme Dev', caption: 'Quand le code compile du premier coup.' },
            { day: 3, type: 'text', content: 'N\'oublie pas ton git commit aujourd\'hui !' },
            // ... Remplissez jusqu'√† 24
            { day: 24, type: 'text', content: 'Joyeux No√´l ! üéÅüíª' }
        ];

        // --- 2. CONFIGURATION DES BLAGUES (TYPEWRITER) ---
        const jokes = [
            "Toc Toc. Qui est l√† ? *Une tr√®s longue pause*... C'est Internet Explorer.",
            "Il y a 10 types de personnes : ceux qui comprennent le binaire, et les autres.",
            "Un d√©veloppeur ne descend pas le m√©tro, il lib√®re la RAM.",
            "Pourquoi les d√©veloppeurs d√©testent la nature ? Trop de bugs.",
            "Hardware : Ce qu'on peut frapper. Software : Ce qu'on ne peut que maudire.",
            "/* Pas de commentaire */",
            "Ctrl+C, Ctrl+V : La base de la connaissance."
        ];

        // --- 3. EFFET MATRIX + NEIGE + EMOJIS (BACKGROUND) ---
        const canvas = document.getElementById('matrix-bg');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        // Les caract√®res qui vont tomber : Code + Neige + Emojis demand√©s
        const chars = '01{}<>?[]/\\|console.log"‚ùÑ‚ùÖ‚ùÜüçëüçÜ'; 
        const charArray = chars.split('');
        const fontSize = 16;
        const columns = width / fontSize;
        const drops = [];

        for(let x = 0; x < columns; x++) {
            drops[x] = Math.random() * height; // D√©part al√©atoire
        }

        function drawMatrix() {
            // Fond noir tr√®s transparent pour l'effet de tra√Æn√©e
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, width, height);

            ctx.font = fontSize + 'px monospace';

            for(let i = 0; i < drops.length; i++) {
                const text = charArray[Math.floor(Math.random() * charArray.length)];
                
                // Couleur changeante selon le caract√®re
                if (text === 'üçë' || text === 'üçÜ') {
                    ctx.fillStyle = '#ff69b4'; // Rose/Violet pour les emojis sp√©ciaux
                } else if (text === '‚ùÑ' || text === '‚ùÖ') {
                    ctx.fillStyle = '#fff'; // Blanc pour la neige
                } else {
                    ctx.fillStyle = '#0f0'; // Vert Matrix pour le code
                }

                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if(drops[i] * fontSize > height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 50);

        // Redimensionnement fen√™tre
        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });


        // --- 4. EFFET TYPEWRITER (HEADER) ---
        const typeTextElement = document.getElementById('typewriter-text');
        let jokeIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typeSpeed = 100;

        function typeWriter() {
            const currentJoke = jokes[jokeIndex];
            
            if (isDeleting) {
                // Effacer
                typeTextElement.textContent = currentJoke.substring(0, charIndex - 1);
                charIndex--;
                typeSpeed = 50; // Plus rapide pour effacer
            } else {
                // √âcrire
                typeTextElement.textContent = currentJoke.substring(0, charIndex + 1);
                charIndex++;
                typeSpeed = 100; // Vitesse normale de frappe
            }

            if (!isDeleting && charIndex === currentJoke.length) {
                // Fin de la phrase, pause
                typeSpeed = 2000;
                isDeleting = true;
            } else if (isDeleting && charIndex === 0) {
                // Phrase effac√©e, phrase suivante
                isDeleting = false;
                jokeIndex = (jokeIndex + 1) % jokes.length;
                typeSpeed = 500;
            }

            setTimeout(typeWriter, typeSpeed);
        }
        document.addEventListener('DOMContentLoaded', typeWriter);


        // --- 5. LOGIQUE CALENDRIER (Similaire pr√©c√©dent mais adapt√©) ---
        const today = new Date();
        const currentDay = today.getDate(); 
        const currentMonth = today.getMonth(); // 11 = D√©cembre
        // DEBUG : D√©commentez pour tester comme si on √©tait le 25 D√©cembre
        // const currentMonth = 11; const currentDay = 25;

        const isDecember = currentMonth === 11; 
        const calendarContainer = document.getElementById('advent-calendar');
        const modal = document.getElementById("content-modal");
        const modalBody = document.getElementById("modal-body");
        const modalTitle = document.getElementById("modal-title");
        const closeModal = document.querySelector(".close-btn");

        function createCalendar() {
            for (let i = 1; i <= 24; i++) {
                const door = document.createElement('div');
                door.className = 'door';
                door.dataset.day = i;
                door.innerHTML = `<span>${i}</span>`;

                const isEnabled = isDecember && i <= currentDay;
                const isOpened = localStorage.getItem(`door_${i}_opened`) === 'true';

                if (isOpened) {
                    door.classList.add('opened');
                    door.innerHTML = `<span>Ouvert</span>`; // Texte change
                    door.addEventListener('click', () => openDoor(i, true));
                } else if (isEnabled) {
                    door.classList.add('enabled');
                    door.addEventListener('click', () => openDoor(i, false));
                } else {
                    door.classList.add('disabled');
                    door.addEventListener('click', () => alert("Acc√®s refus√©. Firewall actif jusqu'au " + i + " d√©cembre ! ‚õî"));
                }
                calendarContainer.appendChild(door);
            }
        }

        function openDoor(day, replay) {
            const content = doorContents.find(c => c.day === day);
            const door = document.querySelector(`.door[data-day="${day}"]`);
            
            // Si c'est la premi√®re ouverture
            if (!replay) {
                door.classList.add('opened');
                door.innerHTML = `<span>Ouvert</span>`; // Changement texte + police (via CSS)
                localStorage.setItem(`door_${day}_opened`, 'true');
            }

            // Contenu Modale
            modalTitle.innerText = `> LOG: JOUR_${day}`;
            modalBody.innerHTML = '';
            
            if (!content) {
                modalBody.innerHTML = `<p>404 Not Found: Ajoutez du contenu dans le JS !</p>`;
            } else {
                if (content.type === 'img' || content.type === 'gif') {
                    modalBody.innerHTML = `<img src="${content.src}" alt="Noel"><p>${content.caption || ''}</p>`;
                } else if (content.type === 'video') {
                    modalBody.innerHTML = `<video controls autoplay><source src="${content.src}" type="video/mp4"></video><p>${content.caption || ''}</p>`;
                } else {
                    modalBody.innerHTML = `<p style="font-size:1.2em; border-left: 3px solid var(--neon-green); padding-left:10px;">${content.content}</p>`;
                }
            }
            modal.style.display = 'block';
        }

        closeModal.onclick = () => modal.style.display = "none";
        window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; }

        createCalendar();

    </script>
</body>
</html>
